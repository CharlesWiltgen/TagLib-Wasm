# 1.0 Release Blockers Design

## Context

58 open issues, 10 at P0/P1. Removing the Workers API closes 5 immediately, leaving 5 to implement.

## Decisions

1. **Remove Workers API entirely** (0 users, WASI path covers Cloudflare Workers)
2. **No deprecation period** for Workers API removal
3. **All 6 items included** in 1.0 scope

## Items

### 1. Remove Workers API

Remove `src/wasm-workers.ts`, Workers exports from `index.ts`/`mod.ts`, Workers tests, and Workers examples/docs. Rewrite `docs/advanced/cloudflare-workers.md` to show unified API usage.

Closes: ai8, v7k, qea, gnp, 0nl, cgo, jzw, a4j, 0ce (deprecated Workers APIs gone)

### 2. WASI PropertyMap Extended Writes (P0 k94)

The C++ shim already calls `file->setProperties(propMap)` but filters out unknown keys. Fix by relaxing the C++ `should_skip()` filter to pass through all uppercase PropertyMap keys. Extend TypeScript encoder to forward all ExtendedTag fields. Add roundtrip tests for extended fields.

### 3. Deprecation Warnings + README (P1 c8q, r8x)

Add `console.warn` deprecation notices to old function names. Update README examples to current API names.

### 4. Document edit() and copyWithTags() (P1 2us)

Add usage examples to API docs page.

### 5. Split simple.ts (P1 e34)

Extract 1,229-line file into `src/simple/` directory module with sub-modules under 250 lines each.

### 6. Dual-Backend Tests (P1 h5x)

Parameterize Emscripten-dependent test suites to run against both Emscripten and WASI backends.

## Execution Order

1 -> 2 -> 3 -> 4 -> 5 -> 6

Items 3-4 (docs/deprecation) can run in parallel. Item 5 (split) is independent. Item 6 depends on item 1 (Workers removal simplifies test surface).
