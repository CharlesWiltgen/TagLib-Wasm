{"id":"taglib-wasm-0bj","title":"Go language bindings via wazero","description":"Add Go package that consumes taglib_wasi.wasm via wazero (pure-Go Wasm runtime). Architecture already supports this — pure C boundary + MessagePack serialization is language-agnostic. Estimated ~2 weeks effort. Key components: Go wrapper (~500 LOC), WASI filesystem config, idiomatic Go API (ReadTags/UpdateTags), tests. No changes needed to existing Wasm binary or C/C++ code. wazero handles WASI P1 natively, msgpack via vmihailenco/msgpack.","status":"open","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-23T17:00:43Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T17:00:43Z"}
{"id":"taglib-wasm-0ce","title":"Add @deprecated markers to deprecated APIs (getGlobalWorkerPool, etc.)","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:15Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-0k0","title":"Rename display name to TagLib-Wasm + update GitHub URLs","description":"Standardize display name casing and update GitHub URLs for planned repo rename","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-23T18:40:15Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T18:52:06Z","closed_at":"2026-02-23T18:52:06Z","close_reason":"All display names updated to TagLib-Wasm, all GitHub URLs updated, CI regex fixed, all tests passing"}
{"id":"taglib-wasm-0nl","title":"Workers audioProperties() typed as nullable but never returns null","description":"AudioFileWorkers.audioProperties() return type is AudioProperties | null but the implementation always returns a partially populated object (never null) with 4 hardcoded stub values. The type is technically correct but misleading — consumers checking for null will never hit that branch while getting garbage data for 4 fields. Should either return null when data is incomplete or narrow the return type.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:46Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-0v3","title":"Phase 4: Edge cases and security tests","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:06Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:38:48Z","closed_at":"2026-02-10T08:38:48Z","close_reason":"Input validation (14 steps, both backends) and security (5 steps, path traversal) all pass."}
{"id":"taglib-wasm-1x6","title":"Fix worker type checking context","description":"Workers fail deno check because they're type-checked in window/DOM context instead of worker context. Need to isolate worker imports from DOM-dependent code or add /// \u003creference lib=\"webworker\" /\u003e directives.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:53Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T12:53:41Z","closed_at":"2026-02-11T12:53:41Z","close_reason":"Added /// \u003creference lib=\"webworker\" /\u003e directive and typed workerSelf constant"}
{"id":"taglib-wasm-24s","title":"WASI getAudioProperties() returns all zeros","description":"file-handle.ts:111-124 ignores audio property data already present in decoded MessagePack. The getAudioProperties() method returns hardcoded zeros instead of reading bitrate/sampleRate/channels/length from the decoded TagData.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T21:34:04Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T22:15:35Z","closed_at":"2026-02-19T22:15:35Z","close_reason":"Fixed: getAudioProperties() now reads bitrate, sampleRate, channels, length, lengthMs from decoded TagData"}
{"id":"taglib-wasm-271","title":"Wire up lyrics (USLT/©lyr) complex property in shim","description":"Lyrics are declared in the TypeScript type system (ComplexPropertyValueMap has LYRICS) but taglib_shim.cpp does not encode or decode them. TagLib supports lyrics via USLT frames (ID3v2), ©lyr atoms (MP4), and LYRICS Vorbis comment. The complex properties API (complexProperties/setComplexProperties) supports LYRICS with fields: text, language, description. Needs: (1) encode_lyrics() in taglib_shim.cpp parallel to encode_pictures(), (2) apply_lyrics_from_msgpack() for write path, (3) getLyrics()/setLyrics() convenience methods in AudioFile interface, (4) tests across MP3/FLAC/OGG/M4A.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:25Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:51Z","closed_at":"2026-02-26T15:17:51Z","close_reason":"Lyrics encode/decode via taglib_lyrics.cpp using complexProperties(LYRICS)"}
{"id":"taglib-wasm-2k9","title":"Handle url.pathname leading slash on Windows in resolveWasmPath","description":"new URL('file:///C:/foo/bar.wasm').pathname returns '/C:/foo/bar.wasm' with a leading slash on Windows. Deno/Node readFile handles this, but for maximum portability consider using import.meta.resolve() or platform checks. Low priority since WASI path goes to fetch() or fs.readFile() which handle it natively.","status":"open","priority":4,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-19T17:53:21Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T17:53:21Z"}
{"id":"taglib-wasm-2p3","title":"Enable WITH_ZLIB in TagLib build for compressed ID3v2 frames","description":"The TagLib build has WITH_ZLIB=OFF (confirmed in CMakeCache). This means zlib-compressed ID3v2 frames silently fail to decompress. Some older MP3 files (especially ~2003-era software like iTunes 4.x, older CDex) used zlib-compressed APIC frames for album art. Enabling zlib requires either bundling zlib source or using a Wasm-compatible zlib build. Low frequency but causes silent data loss when encountered.","status":"closed","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:00Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:30Z","closed_at":"2026-02-26T15:17:30Z","close_reason":"WITH_ZLIB=ON in both Emscripten and WASI builds; zlib cross-compiled for WASI"}
{"id":"taglib-wasm-2pu","title":"Create build/build-eh-sysroot.sh script","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:07Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:30:45Z","closed_at":"2026-02-09T15:30:45Z","close_reason":"Closed"}
{"id":"taglib-wasm-2sq","title":"Verify WASM file resolution chain for npm consumers","description":"dist/index.js:177,179 references 'taglib.wasm' but actual files are taglib-web.wasm, taglib-wasi.wasm, taglib_wasi.wasm. Verify the Emscripten wrapper resolution actually works for npm consumers.","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:46Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:34Z","closed_at":"2026-02-11T14:15:34Z","close_reason":"Verified: dist/ is gitignored, CI rebuilds. taglib-wrapper.js correctly resolves taglib-web.wasm via import.meta.url relative to dist/."}
{"id":"taglib-wasm-2us","title":"TagLib.edit() and TagLib.copyWithTags() not documented","description":"TagLib.edit(input, fn) provides a convenient open-modify-save pattern and TagLib.copyWithTags(src, dest, tags) copies files with modified tags. Both are implemented and working but absent from documentation, LLMs.md, and API reference. Users can't discover them.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:39Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T20:17:13Z","closed_at":"2026-02-23T20:17:13Z","close_reason":"API documentation added for edit() and copyWithTags()"}
{"id":"taglib-wasm-2xw","title":"Add missing sidecar test coverage","description":"Add tests for: process crash mid-operation, malformed MessagePack responses, concurrent operations, shutdown during active operation, large responses.","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:47Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:47Z"}
{"id":"taglib-wasm-2xx","title":"Rename simple API stragglers to read*/apply* convention","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T17:49:36Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T17:58:13Z","closed_at":"2026-02-11T17:58:13Z","close_reason":"Closed"}
{"id":"taglib-wasm-2zu","title":"Split runtime/detector.ts (277 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:34Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:34Z"}
{"id":"taglib-wasm-364","title":"Add advanced audio properties to WASI C shim","description":"bitsPerSample, codec, containerFormat, and isLossless are hardcoded to stubs (0, empty string, false) in WasiFileHandle. Need to extend taglib_shim.cpp to read these from TagLib::AudioProperties and include them in the msgpack response.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-20T02:36:03Z","created_by":"Charles Wiltgen","updated_at":"2026-02-20T04:33:24Z","closed_at":"2026-02-20T04:33:24Z","close_reason":"Extended audio properties (bitsPerSample, codec, containerFormat, isLossless) now read from format-specific AudioProperties subclasses via dynamic_cast."}
{"id":"taglib-wasm-3nc","title":"Remove ghost writeTags JSDoc reference","description":"index.ts:82 has @see writeTags - Deprecated alias for applyTags but writeTags does not exist as a public export. Misleading API docs.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:57Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T16:31:49Z","closed_at":"2026-02-10T16:31:49Z","close_reason":"Removed ghost writeTags JSDoc, fixed simple.ts example to use applyTags"}
{"id":"taglib-wasm-3qu","title":"Expose format-specific audio properties beyond base set","description":"taglib_shim.cpp extracts codec, containerFormat, isLossless, and bitsPerSample but TagLib exposes many more format-specific properties: MPEG version/layer/channelMode/isADTS, FLAC MD5 signature/sampleFrames, MP4 isEncrypted, WAV format code (PCM/float/ADPCM), AIFF isAiffC/compressionType, Ogg Opus inputSampleRate (original pre-resampling rate), Vorbis bitrateMinimum/Maximum/Nominal, precise sampleFrames for most formats. These are useful for format identification, integrity checking, and gapless playback. Needs extension of get_extended_audio_info() and corresponding TypeScript types.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:52Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:52Z","closed_at":"2026-02-26T15:17:52Z","close_reason":"Extended audio props: mpegVersion, mpegLayer, isEncrypted, formatVersion"}
{"id":"taglib-wasm-3u8","title":"Electron: listed as Full support with no detection, test, or docs","description":"README badges and runtime table list Electron as 'Full' support, but there is no Electron-specific detection path in runtime detector, no Electron test, and no Electron documentation. It works incidentally through Node.js but is not explicitly verified. Either add proper Electron testing/docs or remove the Full support claim.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:06Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T21:34:18Z","closed_at":"2026-02-19T21:34:18Z","close_reason":"Fixed in P0 batch"}
{"id":"taglib-wasm-40c","title":"Remove unused .husky/ directory (using .githooks/ instead)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:12Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:12Z"}
{"id":"taglib-wasm-41s","title":"Split msgpack/index.ts (326 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:33Z"}
{"id":"taglib-wasm-45f","title":"Bun runtime: no CI testing despite claiming WASI support","description":"Bun is detected by runtime detector and routed to WASI via node:fs compat layer, but there is zero CI verification. package.json has a bun test command but it's not in CI. We claim Bun support without testing it — this is false advertising. Need: add Bun to CI matrix, verify WASI path works, add Bun-specific integration tests.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:01Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T21:34:18Z","closed_at":"2026-02-19T21:34:18Z","close_reason":"Fixed in P0 batch"}
{"id":"taglib-wasm-46n","title":"Split msgpack/types.ts (296 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:33Z"}
{"id":"taglib-wasm-474","title":"Fix TagLibInitializationError code mismatch","description":"src/errors.ts:61 passes 'INITIALIZATION' but TagLibErrorCode type defines 'INITIALIZATION_FAILED'. Consumers matching on error.code will never match.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:44Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T16:31:47Z","closed_at":"2026-02-10T16:31:47Z","close_reason":"Normalized TagLibErrorCode type to match constructor values"}
{"id":"taglib-wasm-4ql","title":"Add MPC (Musepack) format support","description":"TagLib has full MPC::File support. MPC is declared in AudioFormat type but has no magic-byte detection, no audio property extraction, and no tests. Uses APEv2 tags. MPC has native ReplayGain in its stream headers (trackGain, trackPeak, albumGain, albumPeak). Needs: (1) magic-byte detection in taglib_boundary.c (MP+ or MPCK magic), (2) audio props including native ReplayGain values, (3) test fixtures and coverage.","status":"closed","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:07Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:34Z","closed_at":"2026-02-26T15:17:34Z","close_reason":"MPC MP+/MPCK magic bytes, codec detection"}
{"id":"taglib-wasm-51b","title":"Split src/folder-api.ts into directory module (697 lines → 250 max)","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:15:53Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:15:53Z"}
{"id":"taglib-wasm-52l","title":"Fix tags: {} violating Tag type in scan error paths","description":"In scanWithWorkerPool and scanWithTagLib (folder-api.ts), error paths return { path: filePath, tags: {}, error: err }. The empty object {} does not satisfy the Tag type which has required fields (title, artist, album, etc.). Consumers destructuring tag fields from error entries get undefined. Return a proper empty Tag with default values instead.","status":"closed","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T21:01:03Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T21:08:34Z","closed_at":"2026-02-11T21:08:34Z","close_reason":"Fixed in folder-api.ts: removed duplicate I/O, shared progress ref, EMPTY_TAG constant"}
{"id":"taglib-wasm-59s","title":"Remove stale dist/taglib-wasi.wasm (2.8MB)","description":"dist/taglib-wasi.wasm (2.8MB, Jan 4) is older and larger. dist/wasi/taglib_wasi.wasm (643KB, Feb 10) is the canonical EH-enabled binary. The old binary wastes 2.8MB of download bandwidth on npm.","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:51Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:33Z","closed_at":"2026-02-11T14:15:33Z","close_reason":"Deleted stale dist/taglib-wasi.wasm (2.8MB, Jan 4). New EH-enabled binary at dist/wasi/taglib_wasi.wasm (628KB). dist/ is gitignored so this is local cleanup only."}
{"id":"taglib-wasm-5hh","title":"Fix broken .githooks/post-merge hook (empty string chain)","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:08Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:02:26Z","closed_at":"2026-02-23T21:02:26Z","close_reason":"already resolved in 1.0 release (f1b86e2)"}
{"id":"taglib-wasm-5jc","title":"PropertyMap keys are untyped string — loses PropertyKey safety","description":"PropertyMap is typed as { [key: string]: string[] } which means properties()/setProperties() calls lose the PropertyKey type safety that getProperty/setProperty provide. Users can pass arbitrary strings without compile-time checking. Consider using Record\u003cPropertyKey, string[]\u003e or a branded type for the map keys.","status":"open","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:34Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T20:55:34Z"}
{"id":"taglib-wasm-5uo","title":"Metadata tagging gap analysis: TagLib full capabilities","description":"Epic tracking all gaps between what TagLib 2.1.1 supports and what taglib-wasm exposes. Covers missing formats (13 of 21 unsupported in practice), missing complex properties (lyrics, chapters), unmapped PropertyMap keys, missing format-specific audio properties, and a build config gap (zlib disabled). See gap analysis conversation from 2026-02-26.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:13:19Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:18:01Z","closed_at":"2026-02-26T15:18:01Z","close_reason":"All 18 sub-issues closed. Formats: 13 new (AIFF, ASF, APE, DSF, DSDIFF, WavPack, MPC, TTA, Shorten, MOD/S3M/IT/XM, Ogg FLAC, Speex). Write path: 21 extended fields. Complex properties: lyrics + chapters. Audio props: MPEG version/layer, encryption, format version. zlib enabled.","dependencies":[{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-271","type":"blocks","created_at":"2026-02-26T06:14:28Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-2p3","type":"blocks","created_at":"2026-02-26T06:15:03Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-3qu","type":"blocks","created_at":"2026-02-26T06:14:55Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-4ql","type":"blocks","created_at":"2026-02-26T06:15:10Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-5xu","type":"blocks","created_at":"2026-02-26T06:14:23Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-72y","type":"blocks","created_at":"2026-02-26T06:15:42Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-7hx","type":"blocks","created_at":"2026-02-26T06:15:19Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-9l3","type":"blocks","created_at":"2026-02-26T06:14:27Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-chw","type":"blocks","created_at":"2026-02-26T06:14:28Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-cw4","type":"blocks","created_at":"2026-02-26T06:15:52Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-dxa","type":"blocks","created_at":"2026-02-26T06:15:33Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-fz0","type":"blocks","created_at":"2026-02-26T06:14:44Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-gtl","type":"blocks","created_at":"2026-02-26T06:15:01Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-jrt","type":"blocks","created_at":"2026-02-26T06:14:34Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-mu5","type":"blocks","created_at":"2026-02-26T06:14:53Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-qsc","type":"blocks","created_at":"2026-02-26T06:14:27Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-zsm","type":"blocks","created_at":"2026-02-26T06:14:47Z","created_by":"Charles Wiltgen","metadata":"{}"},{"issue_id":"taglib-wasm-5uo","depends_on_id":"taglib-wasm-zsw","type":"blocks","created_at":"2026-02-26T06:14:38Z","created_by":"Charles Wiltgen","metadata":"{}"}]}
{"id":"taglib-wasm-5xu","title":"Add AIFF format to test suite and magic-byte detector","description":"AIFF has audio property extraction in taglib_audio_props.cpp but is missing from: (1) the test suite FORMAT_FILES in wasi-test-helpers.ts, (2) the magic-byte detector in taglib_boundary.c (needs FORM/AIFF magic detection). TagLib fully supports AIFF via RIFF::AIFF::File. Need a test fixture .aiff file and inclusion in all format test matrices. Lowest-hanging fruit — most of the code already exists.","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:19Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:30Z","closed_at":"2026-02-26T15:17:30Z","close_reason":"AIFF magic-byte detection, enum, audio props already present"}
{"id":"taglib-wasm-6j9","title":"Research in-process filesystem access (jco, Wasmer SDK, custom imports)","description":"Evaluate approaches to replace sidecar subprocess with in-process filesystem access.\n\n## Approaches to evaluate\n\n### 1. jco + WASI 0.2 Component Model (primary)\n- Jco 1.0 released, production-ready (Bytecode Alliance)\n- WASI 0.2 with real filesystem via preview2-shim\n- Node.js lacks native WASI P2, so jco is the practical JS path\n- Prototype: compile taglib_wasi.wasm as WASI component, transpile with jco\n- Test filesystem access in Node.js and Deno\n\n### 2. Wasmer @wasmer/sdk with WASIX (alternative)\n- Can mount real host directories (unlike @wasmer/wasi which only has MemFS)\n- Previous attempt used wrong package (@wasmer/wasi) — @wasmer/sdk is the correct one\n- Note: security concerns around sandbox bypass (GHSA-55f3-3qvg-8pv5)\n\n### 3. Custom host functions (simplest)\n- Skip WASI filesystem entirely\n- Expose read_file(path)/write_file(path, bytes) as Wasm imports\n- Essentially an in-process version of what sidecar does\n- Lowest complexity, most control, but non-standard\n\n## Success criteria\n- In-process (no subprocess)\n- Real filesystem access (not MemFS)\n- Works in Node.js and Deno\n- Latency competitive with sidecar approach","notes":"ADR written: docs/development/adr-local-filesystem-access.md","status":"closed","priority":1,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:41Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T13:13:50Z","closed_at":"2026-02-09T13:13:50Z","close_reason":"Implemented in-process WASI host with real filesystem syscalls. loadWasiHost() provides path-based and buffer-based access."}
{"id":"taglib-wasm-6v6","title":"Add fluent MutableTag setters (return this)","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-11T17:49:48Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T17:58:14Z","closed_at":"2026-02-11T17:58:14Z","close_reason":"Closed"}
{"id":"taglib-wasm-72y","title":"Add Shorten (.shn) format support","description":"TagLib 2.1.1 added Shorten::File support (enabled via TAGLIB_WITH_SHORTEN=1). Not present in taglib-wasm at all — no type declaration, no detection, no audio props. Shorten has minimal tagging (internal header fields only). Niche legacy lossless format. Audio props: shortenVersion, fileType, bitsPerSample, sampleFrames.","status":"closed","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:39Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:35Z","closed_at":"2026-02-26T15:17:35Z","close_reason":"Shorten ajkg magic bytes, bitsPerSample, lossless"}
{"id":"taglib-wasm-7hx","title":"Add TrueAudio (.tta) format support","description":"TagLib has full TrueAudio::File support (enabled via TAGLIB_WITH_TRUEAUDIO=1). TTA is declared in AudioFormat type but has no magic-byte detection, no audio property extraction (bitsPerSample, sampleFrames, ttaVersion), and no tests. Uses ID3v2 tags (+ optional ID3v1). Needs: (1) magic-byte detection (TTA1 magic), (2) audio props, (3) test fixtures.","status":"closed","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:16Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:36Z","closed_at":"2026-02-26T15:17:36Z","close_reason":"TrueAudio TTA1 magic bytes, bitsPerSample, version"}
{"id":"taglib-wasm-7jk","title":"Rename verb APIs to read/apply/update convention","description":"API naming redesign from GH #12 discussion. Convention: read* = read-only, apply* = modify and return buffer, update* = modify and write to disk. Changes: setCoverArt → applyCoverArt, getCoverArt → readCoverArt, getFormat → readFormat, getPictureMetadata → readPictureMetadata. New: updatePictures(path, pics) → void, updateCoverArt(path, data, mime) → void. Old names get @deprecated markers.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-11T15:07:32Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T17:58:19Z","closed_at":"2026-02-11T17:58:19Z","close_reason":"Superseded by taglib-wasm-2xx (renamed functions now use read*/apply* convention)"}
{"id":"taglib-wasm-8a9","title":"Fix SonarCloud code smells in folder-api.ts (6 useless assignments, 4 type assertions)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:24Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:24Z"}
{"id":"taglib-wasm-8cj","title":"Investigate Emscripten 5.0.1 → 5.0.2 update for TagLib-Wasm","description":"Emscripten 5.0.2 has been released. Investigate what changed and what TagLib-Wasm needs to update to stay in sync. Checklist: (1) Review Emscripten 5.0.2 changelog for breaking changes, deprecations, and new features. (2) Check if any Wasm EH behavior changed (critical — our build relies on -fwasm-exceptions). (3) Check if WASI SDK compatibility is affected. (4) Check if any build flags or CMake toolchain changes are needed. (5) Check if emsdk version pinning needs updating in CI (GitHub Actions). (6) Check if any Embind API changes affect our bindings. (7) Test build with 5.0.2 and run full test suite. (8) Document any migration steps needed.","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T16:57:19Z","closed_at":"2026-02-26T16:57:19Z","close_reason":"Verified complete. Emscripten 5.0.2 pinned in CI (94b2115), Deno compat regex updated for node:module change, binary rebuilt (67bc7a1), all 135 tests pass."}
{"id":"taglib-wasm-8gh","title":"Fix inaccurate progress counter in concurrent scan batches","description":"In scanWithWorkerPool (folder-api.ts), the 'processed' counter is captured by value via { count: processed } inside batch.map(). All concurrent callbacks in a batch capture the same stale value, so progress reporting is inaccurate. Use a shared mutable ref or increment atomically after each Promise resolves.","status":"closed","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T21:01:02Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T21:08:34Z","closed_at":"2026-02-11T21:08:34Z","close_reason":"Fixed in folder-api.ts: removed duplicate I/O, shared progress ref, EMPTY_TAG constant"}
{"id":"taglib-wasm-9gt","title":"Internal C-style functions leak through TagLibModule public interface","description":"TagLibModule in wasm.ts includes @internal C-style function types (_taglib_file_new_from_buffer, etc.) in the public-facing interface. These are implementation details that shouldn't be part of the public API surface. Consider splitting into TagLibModuleInternal for C-bindings and a clean public TagLibModule interface.","status":"open","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:43Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T20:55:43Z"}
{"id":"taglib-wasm-9jg","title":"WASI audio properties: bitsPerSample/codec/containerFormat/isLossless","description":"Requires expanding TagData C struct to include bitsPerSample, codec, containerFormat, isLossless fields. Update extract_properties() to populate them from TagLib::AudioProperties. Update the MessagePack encoder/decoder. Currently return stub values (0, empty string, false) in WasiFileHandle.getAudioProperties().","status":"closed","priority":0,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T22:15:23Z","created_by":"Charles Wiltgen","updated_at":"2026-02-20T04:56:28Z","closed_at":"2026-02-20T04:56:28Z","close_reason":"Already implemented in taglib_audio_props.cpp — bitsPerSample, codec, containerFormat, isLossless all working across 5 formats"}
{"id":"taglib-wasm-9jz","title":"Phase 2: Core unified tests (both backends)","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:05Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:37:17Z","closed_at":"2026-02-10T08:37:17Z","close_reason":"All 4 Phase 2 test files pass: basic-tags (24 steps), audio-properties (12 steps), format-detection (16 steps), cross-backend-parity (10 steps). Both backends produce identical results."}
{"id":"taglib-wasm-9l3","title":"No format-specific tag access (ID3v2 frames, selective stripping, APEv2, WMA, AIFF)","description":"Cannot read/write arbitrary ID3v2 frames (SYLT synchronized lyrics, GEOB, PRIV, CHAP chapters, ETCO timing). Cannot selectively strip tag types (e.g. remove ID3v1 while keeping ID3v2). No APEv2-specific access, no WMA/ASF attributes, no AIFF chunk access. Only the abstract PropertyMap and TXXX/UFID-backed extended properties are accessible. This limits advanced use cases like chapter editing and synchronized lyrics.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:28Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:53Z","closed_at":"2026-02-26T15:17:53Z","close_reason":"Chapters implemented; format-specific audio props added; full frame-level access deferred"}
{"id":"taglib-wasm-a4j","title":"Split src/worker-pool.ts into directory module (480 lines → 250 max)","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:08Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:10Z","closed_at":"2026-02-23T19:57:10Z","close_reason":"Worker pool code removed"}
{"id":"taglib-wasm-a9z","title":"BatchResult.file becomes synthetic 'file-N' for buffer inputs","description":"When batch operations receive Uint8Array inputs instead of file paths, BatchResult.file becomes a synthetic 'file-0', 'file-1', etc. name. Consumers cannot easily correlate results back to their input buffers. Consider: include the array index explicitly, accept named inputs like {name, data}, or document this behavior.","status":"open","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:39Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T20:55:39Z"}
{"id":"taglib-wasm-ae4","title":"Workers API limitations completely undocumented","description":"Cloudflare Workers API has severe limitations vs the full API but none are documented: audioProperties() returns stubs for 4 fields (bitsPerSample, codec, containerFormat, isLossless), extendedTag() returns all undefined, no picture/rating support, getFileBuffer() is a no-op. Users discover these at runtime. Need: document all limitations clearly in Workers docs, LLMs.md, and API reference.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:18Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T21:34:18Z","closed_at":"2026-02-19T21:34:18Z","close_reason":"Fixed in P0 batch"}
{"id":"taglib-wasm-ai8","title":"Workers extendedTag() returns all undefined","description":"AudioFileWorkers.extendedTag() returns an ExtendedTag object with every field set to undefined — MusicBrainz IDs, ReplayGain, AcoustID, albumArtist, composer, etc. are all inaccessible through the Workers path. The C-style bindings only support the 7 basic tags. Need either implement extended tag reading in C bindings or clearly indicate unsupported.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:18Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-ajk","title":"Clean up stale root files (MIGRATION_GUIDE, memory-audit.md, TASKS.md)","status":"open","priority":4,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:33Z"}
{"id":"taglib-wasm-anc","title":"Type TagLibError.code as TagLibErrorCode not string","description":"src/errors.ts:40 declares code: string instead of code: TagLibErrorCode, defeating the purpose of branded error codes for programmatic handling.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:49:04Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T16:43:36Z","closed_at":"2026-02-10T16:43:36Z","close_reason":"TagLibError.code typed as TagLibErrorCode instead of string"}
{"id":"taglib-wasm-aof","title":"Fix denoland/setup-deno@v1 in publish-jsr job","description":".github/workflows/publish-everywhere.yml:190 uses @v1, all other jobs use @v2. Could cause JSR publish failures.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:48Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T16:31:47Z","closed_at":"2026-02-10T16:31:47Z","close_reason":"Changed denoland/setup-deno@v1 to @v2 in publish-jsr job"}
{"id":"taglib-wasm-b3l","title":"Re-enable or create tracking issues for disabled Windows/Bun CI tests","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:28Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:28Z"}
{"id":"taglib-wasm-b6d","title":"Refactor taglib_shim.cpp to stay under 250-line limit","description":"taglib_shim.cpp is ~400 lines, exceeding the SonarQube 250-line file limit (CLAUDE.md). Split into taglib_read.cpp (encode_file_to_msgpack, read_from_buffer, read_from_path) and taglib_write.cpp (decode_msgpack_to_propmap, apply_propmap, write_to_path, write_to_buffer) with shared FieldMapping table in a common header.","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-19T23:39:32Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T23:39:32Z"}
{"id":"taglib-wasm-bcb","title":"Export missing error types and type guards","description":"WorkerError, SidecarError, isWorkerError(), isSidecarError() are thrown/defined but not exported from index.ts. Consumers cannot catch these by type. Also BitrateControlMode type and constants not re-exported.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:53Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T16:31:48Z","closed_at":"2026-02-10T16:31:48Z","close_reason":"Exported WorkerError, SidecarError, isWorkerError, isSidecarError, BitrateControlMode from index.ts"}
{"id":"taglib-wasm-bcu","title":"Document memory management patterns","description":"Document what happens without dispose(), best practices for long-running apps, memory usage patterns. Add to docs/ directory.","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:55Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:55Z"}
{"id":"taglib-wasm-c8q","title":"Deprecated functions emit no deprecation warnings","description":"applyTagsToBuffer and writeTagsToFile are deprecated in favor of applyTags and updateTags respectively, but calling the deprecated functions produces no console warning or any indication they're deprecated. Users have no signal to migrate. Need: add runtime deprecation warnings.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:31Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T20:16:52Z","closed_at":"2026-02-23T20:16:52Z","close_reason":"Deprecated functions removed entirely (0 users, no deprecation period needed)"}
{"id":"taglib-wasm-cgo","title":"Workers extendedTag() can't distinguish unsupported vs absent","description":"AudioFileWorkers.extendedTag() returns ExtendedTag with all extended fields set to undefined. Consumers cannot distinguish 'this field is not supported in Workers API' from 'this field is not present in the audio file'. Need a way to signal which fields are unsupported vs empty — possibly a separate type, sentinel values, or documented behavior.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:51Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-chw","title":"WASI write path for extended fields","description":"write_to_path() in taglib_shim.cpp only writes 7 basic tags. Writing albumArtist/composer/disc/bpm back requires PropertyMap writes via file-\u003esetProperties().","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T21:34:05Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:49Z","closed_at":"2026-02-26T15:17:49Z","close_reason":"FIELD_MAP expanded with 21 new fields including ReplayGain, MusicBrainz, sort fields, ISRC, conductor, copyright, lyricist, encodedBy"}
{"id":"taglib-wasm-com","title":"Replace console.warn/error with proper error propagation in runtime loaders","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:38Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:38Z"}
{"id":"taglib-wasm-crm","title":"Split src/file-utils.ts into directory module (510 lines → 250 max)","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:15:59Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:15:59Z"}
{"id":"taglib-wasm-cw4","title":"Add tracker module format support (MOD/S3M/IT/XM)","description":"TagLib has full support for tracker modules via Mod::File, S3M::File, IT::File, and XM::File (enabled via TAGLIB_WITH_MOD=1). These are declared in AudioFormat type but have no detection, no audio props, and no tests. Tracker formats use internal Mod tags with limited metadata (title, comment). Niche retro/chiptune use case.","status":"closed","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:48Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:36Z","closed_at":"2026-02-26T15:17:36Z","close_reason":"MOD/S3M/IT/XM magic bytes at format-specific offsets"}
{"id":"taglib-wasm-d09","title":"Implement proper Wasm memory management","description":"Audit all _malloc() usage. Add try-finally blocks for _free(). Migrate to RAII pattern with WasmAlloc/WasmArena using 'using' statements per project rules. Affected files: taglib.ts, workers.ts.","status":"closed","priority":0,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:52Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:40:58Z","closed_at":"2026-02-11T10:40:58Z","close_reason":"Migrated Emscripten Workers API to RAII memory management using WasmAlloc/WasmArena with using statements. Added emscriptenToWasmExports adapter bridge, Symbol.dispose to AudioFileWorkers, consolidated 5 tag setters via setStringTag helper, migrated TagLibWorkers.open() and processAudioMetadata() to RAII. All 395 tests pass."}
{"id":"taglib-wasm-d40","title":"Add taglib.edit() callback-scoped write method","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-11T17:49:41Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T17:58:14Z","closed_at":"2026-02-11T17:58:14Z","close_reason":"Closed"}
{"id":"taglib-wasm-dcr","title":"Fix package author information","description":"package.json has placeholder author info. Update with correct details.","status":"open","priority":4,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:56Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:56Z"}
{"id":"taglib-wasm-dqn","title":"Increase test coverage from 64% to 80% target","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:42Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:42Z"}
{"id":"taglib-wasm-dxa","title":"Add Ogg FLAC and Ogg Speex format support","description":"TagLib supports Ogg::FLAC::File (.oga) and Ogg::Speex::File (.spx). Neither is present in taglib-wasm. Both use Xiph/Vorbis comment tags. The OggS magic byte is already detected, but the codec probe in taglib_boundary.c only checks for OpusHead — needs extension to detect FLAC and Speex codec pages within OGG containers. Speex has specific audio props (speexVersion, bitrateNominal). Ogg FLAC has FLAC audio props.","status":"closed","priority":4,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:15:30Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:34Z","closed_at":"2026-02-26T15:17:34Z","close_reason":"Ogg FLAC (0x7fFLAC) and Speex (Speex header) detection"}
{"id":"taglib-wasm-dxw","title":"Split msgpack/encoder.ts (306 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:33Z"}
{"id":"taglib-wasm-e34","title":"Split src/simple.ts into directory module (1,229 lines → 250 max)","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:15:48Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:28:44Z","closed_at":"2026-02-23T19:28:44Z","close_reason":"Already split into src/simple/ directory module (6 files, all \u003c250 lines)"}
{"id":"taglib-wasm-f99","title":"Fix flaky concurrent operations performance test","description":"tests/taglib.test.ts:681 has 2000ms limit that is too tight for local runs (failed at 2070ms). Already skipped in CI. Consider 3000ms or env var for limit.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:59Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T13:59:23Z","closed_at":"2026-02-11T13:59:23Z","close_reason":"Assert total time across all formats instead of per-format"}
{"id":"taglib-wasm-fz0","title":"Add ASF/WMA format support","description":"TagLib has full ASF::File support (enabled via TAGLIB_WITH_ASF=1). WMA is declared in AudioFormat type but has no magic-byte detection, no audio property extraction (codec, codecName, isEncrypted, bitsPerSample), and no tests. ASF attributes support arbitrary key-value metadata. Common in Windows ecosystems. Needs: (1) magic-byte detection in taglib_boundary.c (ASF header GUID: 30 26 B2 75 8E 66 CF 11), (2) audio props via dynamic_cast\u003cASF::File\u003e, (3) test fixtures and coverage.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:41Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:31Z","closed_at":"2026-02-26T15:17:31Z","close_reason":"ASF/WMA magic bytes, dynamic_cast, codec/encryption detection"}
{"id":"taglib-wasm-gd4","title":"Remove unused imports in simple.ts and taglib-worker.ts","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:19Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:19Z"}
{"id":"taglib-wasm-gid","title":"Split msgpack/decoder.ts (299 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:33Z"}
{"id":"taglib-wasm-gio","title":"Simplify AudioFile/AudioFileInterface dual export","description":"index.ts:41-44 exports class as AudioFile and interface as AudioFileInterface. Consumers see both in autocomplete, unclear which to use for type annotations.","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:55Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:41Z","closed_at":"2026-02-11T14:15:41Z","close_reason":"Removed AudioFileInterface type export from index.ts. The AudioFileImpl class (exported as AudioFile) already serves as both value and instance type in TypeScript, making the interface alias redundant."}
{"id":"taglib-wasm-gl7","title":"Add rating support to WASI C shim","description":"Ratings are silently dropped on WASI save because the C shim doesn't handle rating data in the msgpack payload. Need to extend taglib_shim.cpp to encode/decode Rating structs (rating, email, counter) via the msgpack boundary.","notes":"Deferred: TagLib has no generic API for ratings. Requires format-specific frame manipulation (ID3v2 POPM, ASF rating). Complexity/benefit ratio is poor for initial release.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-20T02:35:56Z","created_by":"Charles Wiltgen","updated_at":"2026-02-20T04:55:40Z","closed_at":"2026-02-20T04:55:40Z","close_reason":"Implemented rating read/write in WASI C++ shim via format-specific APIs: POPM frames for MP3, XiphComment RATING field for FLAC/OGG/Opus, freeform atom for MP4"}
{"id":"taglib-wasm-gnp","title":"Workers API: no picture or rating support","description":"The Cloudflare Workers API path has no support for reading/writing pictures or ratings. getPictures(), setPictures(), getRatings(), setRatings() and related methods are unavailable. This significantly limits the Workers API for music library applications that need cover art.","status":"closed","priority":1,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:22Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-gqm","title":"Clean up stubs, docs, and memory files","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:12Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:37:04Z","closed_at":"2026-02-09T15:37:04Z","close_reason":"Closed"}
{"id":"taglib-wasm-gtl","title":"Add APE (Monkey's Audio) format support","description":"TagLib has full APE::File support (enabled via TAGLIB_WITH_APE=1). APE is declared in AudioFormat type but has no magic-byte detection, no audio property extraction, and no tests. Uses APEv2 tags (+ optional ID3v1). Needs: (1) magic-byte detection in taglib_boundary.c (MAC magic), (2) audio props, (3) test fixtures and coverage.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:58Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:32Z","closed_at":"2026-02-26T15:17:32Z","close_reason":"APE magic bytes, bitsPerSample, version, lossless"}
{"id":"taglib-wasm-h5x","title":"All Emscripten-dependent tests must work via both backends","description":"Test quality gap: ~23 tests in taglib.test.ts + tests in picture-api, rating-api, extended-metadata, codec-detection, edge-cases, worker-pool, folder-api, partial-loading, and error-handling only test the Emscripten backend (via TagLib.initialize()). These tests fail in Deno because the unified loader selects WASI (which crashes via Wasmer SDK path). Root causes: (1) loadTagLibModule() in index.ts doesn't forward forceWasmType to the unified loader (2) The Wasmer SDK WASI path has function signature mismatches. Fix: Either fix the unified loader passthrough bug, or migrate these tests to use the backend-adapter.ts pattern (forEachBackend) so they run against both WASI and Emscripten. All user-facing features should be validated on BOTH backends.","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T09:02:19Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T20:22:38Z","closed_at":"2026-02-23T20:22:38Z","close_reason":"Core tests run against both Emscripten and WASI backends. Added 10 cross-backend write interop tests."}
{"id":"taglib-wasm-h8z","title":"WASI shim doesn't populate albumArtist/composer/disc/bpm through MessagePack path","description":"taglib_shim.cpp TagData struct defines albumArtist, composer, disc, bpm fields but extract_tags() doesn't populate them in the MessagePack wire format. WASI users only get the 7 basic tags (title, artist, album, comment, genre, year, track) while the Emscripten path exposes all extended metadata. This creates a feature disparity between backends that users don't expect.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:13Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T21:34:18Z","closed_at":"2026-02-19T21:34:18Z","close_reason":"Fixed in P0 batch"}
{"id":"taglib-wasm-ivd","title":"Split runtime/wasmtime-sidecar.ts (315 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:33Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:33Z"}
{"id":"taglib-wasm-iyc","title":"Phase 6: Integration workflow tests","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:07Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:57:29Z","closed_at":"2026-02-10T08:57:29Z","close_reason":"Integration (8 steps), unicode comprehensive (22 steps) pass for both backends."}
{"id":"taglib-wasm-j18","title":"Split src/runtime/wasi-adapter.ts (520 lines → 250 max)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:16Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:16Z"}
{"id":"taglib-wasm-jrt","title":"Add DSF and DSDIFF (DSD) format support","description":"TagLib has full DSF::File and DSDIFF::File support (enabled via TAGLIB_WITH_DSF=1 in this build). Neither format is exposed in taglib-wasm — no type declarations, no magic-byte detection, no audio property extraction, no tests. DSF uses ID3v2 tags, DFF uses DIIN tags. Growing audiophile format. Needs: (1) AudioFormat type additions, (2) magic-byte detection in taglib_boundary.c, (3) format-specific audio props in taglib_audio_props.cpp (bitsPerSample, sampleCount, formatVersion, channelType), (4) test fixtures and test coverage.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:31Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:32Z","closed_at":"2026-02-26T15:17:32Z","close_reason":"DSF/DSDIFF magic bytes, bitsPerSample, DSD codec"}
{"id":"taglib-wasm-jzw","title":"Split src/workers.ts into directory module (492 lines → 250 max)","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:03Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:10Z","closed_at":"2026-02-23T19:57:10Z","close_reason":"Worker pool code removed"}
{"id":"taglib-wasm-k94","title":"WASI buffer write: extended field writes via PropertyMap","description":"write_to_buffer() only writes the 7 basic Tag* fields (title, artist, album, comment, genre, year, track). Writing albumArtist, composer, disc, bpm back requires PropertyMap writes in write_to_buffer(). Related to extended field support.","status":"closed","priority":0,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T22:15:25Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T20:03:03Z","closed_at":"2026-02-23T20:03:03Z","close_reason":"Extended PropertyMap writes verified working across MP3/FLAC/OGG. Added 12 roundtrip tests."}
{"id":"taglib-wasm-kit","title":"Remove 6 stale build scripts from build/ (build-poc, build-wasi-test, build-dual, test-*)","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:04Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:02:26Z","closed_at":"2026-02-23T21:02:26Z","close_reason":"already resolved in 1.0 release (f1b86e2)"}
{"id":"taglib-wasm-l64","title":"Fix duplicate worker pool reads in scanWithWorkerPool","description":"scanWithWorkerPool pre-fetches readTags/readProperties/readPictures, then processFileWithWorker makes the same 3 calls again. Every file is read from the worker pool twice. Remove the pre-fetch block (originally labeled 'warm up the worker pool') in folder-api.ts.","status":"closed","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T21:01:01Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T21:08:34Z","closed_at":"2026-02-11T21:08:34Z","close_reason":"Fixed in folder-api.ts: removed duplicate I/O, shared progress ref, EMPTY_TAG constant"}
{"id":"taglib-wasm-lyc","title":"Split runtime/wasi-host.ts (285 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:34Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:34Z"}
{"id":"taglib-wasm-m5t","title":"Split src/runtime/unified-loader.ts (360 lines → 250 max)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:30Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:30Z"}
{"id":"taglib-wasm-me3","title":"Split src/runtime/wasi-loader.ts (412 lines → 250 max)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:25Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:25Z"}
{"id":"taglib-wasm-msp","title":"MutableTag properties not readonly — silent runtime failure","description":"MutableTag interface doesn't mark properties as readonly. Consumers can write tag.title = 'x' which compiles successfully but does nothing at runtime because the object is a snapshot copy, not a live proxy. The setter methods (setTitle, etc.) are the correct API. Need: add readonly to all MutableTag properties inherited from Tag to catch this at compile time.","status":"closed","priority":0,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:23Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T21:34:18Z","closed_at":"2026-02-19T21:34:18Z","close_reason":"Fixed in P0 batch"}
{"id":"taglib-wasm-mu5","title":"Add WavPack (.wv) format support","description":"TagLib has full WavPack::File support. WavPack is declared in AudioFormat type but has no magic-byte detection, no audio property extraction (bitsPerSample, isLossless, sampleFrames, version), and no tests. Uses APEv2 tags (+ optional ID3v1). Popular lossless format in audiophile communities. Needs: (1) magic-byte detection in taglib_boundary.c (wvpk magic), (2) audio props via dynamic_cast\u003cWavPack::File\u003e, (3) test fixtures and coverage.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:51Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:33Z","closed_at":"2026-02-26T15:17:33Z","close_reason":"WavPack magic bytes, bitsPerSample, isLossless, version"}
{"id":"taglib-wasm-nj0","title":"Update build scripts for WASI SDK 30","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:08Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:30:45Z","closed_at":"2026-02-09T15:30:45Z","close_reason":"Closed"}
{"id":"taglib-wasm-nvz","title":"Split src/web-utils.ts into directory module (371 lines → 250 max)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:12Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:12Z"}
{"id":"taglib-wasm-ocp","title":"1.0.0-beta.1 Release Readiness","status":"closed","priority":1,"issue_type":"epic","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:28Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:57Z","closed_at":"2026-02-11T14:15:57Z","close_reason":"All 12 child issues resolved. 4 P0 bugs fixed, 4 P1 verifications completed, 4 P2 cleanup items done. Release readiness achieved."}
{"id":"taglib-wasm-ois","title":"Phase 1: Test infrastructure (adapter + fixtures)","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:04Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:35:47Z","closed_at":"2026-02-10T08:35:47Z","close_reason":"Created backend-adapter.ts and shared-fixtures.ts. Both type-check clean."}
{"id":"taglib-wasm-oqn","title":"Make WASI host runtime-agnostic (support Node.js and Bun)","description":"The in-process WASI host (src/runtime/wasi-host.ts) currently uses Deno-specific synchronous APIs (Deno.openSync, Deno.readSync, Deno.seekSync) for WASI syscalls. Node.js and Bun both have equivalent synchronous fs APIs (fs.openSync, fs.readSync, etc.) that could serve the same role. This would enable seek-based I/O for all server-side runtimes instead of forcing Node/Bun through the buffer-based Emscripten path.","status":"closed","priority":1,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-11T15:17:05Z","created_by":"Charles Wiltgen","updated_at":"2026-02-12T12:01:12Z","closed_at":"2026-02-12T12:01:12Z","close_reason":"Fixed 2 straggler Deno calls (folder-api.ts, wasmer-sdk-loader.ts), deprecated legacy wasi-loader.ts, added cross-runtime WASI smoke test passing on Deno/Node/Bun"}
{"id":"taglib-wasm-pck","title":"Missing AudioFile convenience methods: MusicBrainzReleaseGroupId, totalTracks, totalDiscs","description":"AudioFile has named getters/setters for MusicBrainzTrackId, ReleaseId, ArtistId but not ReleaseGroupId despite the property constant existing (MUSICBRAINZ_RELEASEGROUPID). Similarly, totalTracks and totalDiscs are in the ExtendedTag type but have no convenience methods on AudioFile — users must use raw setProperty('TOTALTRACKS', ...). These are common metadata fields that deserve first-class API methods.","status":"open","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:32Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T20:55:32Z"}
{"id":"taglib-wasm-pfw","title":"Fix SonarCloud coverage path bug (hardcoded /Users/ in CI)","status":"open","priority":3,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:46Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:46Z"}
{"id":"taglib-wasm-ptz","title":"Fix: Bun incorrectly triggers WASI loader path (GH #12)","description":"Bun sets process.versions.node for compat, so isNode() returns true. Bun gets detected as node-wasi, triggering the WASI path. Also, static import of @wasmer/sdk fails in non-Deno environments. Fix: add isBun() detection before Node checks, and make wasmer-sdk-loader import lazy.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-11T14:55:40Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T15:07:37Z","closed_at":"2026-02-11T15:07:37Z","close_reason":"Fixed: Bun now detected before Node.js, wasmer-sdk-loader import made lazy"}
{"id":"taglib-wasm-qea","title":"Workers API: getFileBuffer() is a no-op stub","description":"AudioFileWorkers.getFileBuffer() prints a console.warn and returns an empty Uint8Array(0). This means users cannot get the modified buffer back after making tag changes in Workers — save() writes to the C-side buffer but there's no way to retrieve it. This makes the Workers write path essentially broken.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:26Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-qix","title":"Add picture support to WASI C shim","description":"Pictures are silently dropped on WASI save because the C shim doesn't handle binary picture data in the msgpack payload. Need to extend taglib_shim.cpp to encode/decode Picture structs (mimeType, data, type) via the msgpack boundary.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-20T02:35:51Z","created_by":"Charles Wiltgen","updated_at":"2026-02-20T04:33:21Z","closed_at":"2026-02-20T04:33:21Z","close_reason":"Pictures now encoded/decoded in C++ shim via TagLib complexProperties API. Roundtrip tested across FLAC, MP3, OGG, M4A, WAV."}
{"id":"taglib-wasm-qof","title":"Split src/runtime/wasmer-sdk-loader.ts (472 lines → 250 max)","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:16:21Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T10:16:21Z"}
{"id":"taglib-wasm-qsc","title":"Broader WASI extended metadata (MusicBrainz, ReplayGain, AcoustID)","description":"MusicBrainz IDs, ReplayGain values, and AcoustID fingerprints are not in the TagData struct at all. Would require struct expansion in taglib_msgpack.h, encoder/decoder changes in taglib_msgpack.c, and taglib_shim.cpp PropertyMap reads for the additional keys.","status":"closed","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-19T21:34:09Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:53Z","closed_at":"2026-02-26T15:17:53Z","close_reason":"Extended roundtrip tests added for ReplayGain, AcoustID, MusicBrainz, sort fields, conductor, copyright, ISRC, totalTracks/totalDiscs"}
{"id":"taglib-wasm-quu","title":"Split utils/file.ts (280 lines) into sub-modules","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-14T15:08:34Z","created_by":"Charles Wiltgen","updated_at":"2026-02-14T15:08:34Z"}
{"id":"taglib-wasm-r0h","title":"Phase 3: Backend-specific test fixes","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:05Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:38:48Z","closed_at":"2026-02-10T08:38:48Z","close_reason":"WASI write roundtrip: 12 tests pass for all 5 formats + unicode + overwrite."}
{"id":"taglib-wasm-r8x","title":"README examples still use deprecated function names","description":"README.md code examples reference applyTagsToBuffer and/or writeTagsToFile which are deprecated. Should be updated to use the current applyTags and updateTags names.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:35Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T20:16:52Z","closed_at":"2026-02-23T20:16:52Z","close_reason":"Deprecated functions removed entirely (0 users, no deprecation period needed)"}
{"id":"taglib-wasm-rvj","title":"Folder API subpath export inconsistency between deno.json and docs","description":"deno.json defines a taglib-wasm/folder subpath export, but documentation states the Folder API is 'exported from main module, not a subpath'. One of these is wrong. Verify which is correct and fix the other.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:56Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:38:13Z","closed_at":"2026-02-23T21:38:13Z","close_reason":"implemented in 1.0 cleanup"}
{"id":"taglib-wasm-s3m","title":"Harden sidecar — fix critical/high code review issues","description":"Fix 6 issues from code review: (1) Add try-finally in wasmtime-sidecar.ts #sendRequest()/#receiveResponse(), (2) Add path traversal validation in taglib_sidecar.c, (3) Fix buffer accumulation in #readExact() (pre-allocate from length prefix), (4) Add mutex/state machine for shutdown race condition, (5) Wrap setSidecarConfig() shutdown in try-finally, (6) Add max length validation for mpack strings in C.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:45Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T13:13:51Z","closed_at":"2026-02-09T13:13:51Z","close_reason":"C shim now supports path-based access. WASI stubs updated for new binary signatures. Sidecar binary rebuilt with path_open imports."}
{"id":"taglib-wasm-ss1","title":"Refactor taglib_shim.cpp to use FileRef","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:11Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:32:36Z","closed_at":"2026-02-09T15:32:36Z","close_reason":"Closed"}
{"id":"taglib-wasm-t67","title":"Make WASI host runtime-agnostic","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-11T15:26:44Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T15:36:05Z","closed_at":"2026-02-11T15:36:05Z","close_reason":"Implemented FileSystemProvider DI pattern for runtime-agnostic WASI host"}
{"id":"taglib-wasm-te1","title":"Add tests for API realignment changes","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T17:49:52Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T17:58:14Z","closed_at":"2026-02-11T17:58:14Z","close_reason":"Closed"}
{"id":"taglib-wasm-ti6","title":"Add locateFile fallback to unified loader loadEmscriptenModule","description":"The unified loader's loadEmscriptenModule (module-loading.ts) doesn't set a locateFile fallback when no wasmUrl is provided, unlike module-loader.ts which does. Emscripten's own import.meta.url handles this since taglib-wrapper.js and taglib-web.wasm are siblings in build/, but adding an explicit locateFile would be consistent and eliminate a potential failure mode. Should fix before GA.","status":"open","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-19T17:53:17Z","created_by":"Charles Wiltgen","updated_at":"2026-02-19T17:53:17Z"}
{"id":"taglib-wasm-ttp","title":"Phase 0: Rebuild Emscripten binary","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:04Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:33:56Z","closed_at":"2026-02-10T08:33:56Z","close_reason":"Emscripten binary rebuilt (434K wasm). Works with legacyMode:true. Unified loader has a separate bug (doesn't forward forceWasmType)."}
{"id":"taglib-wasm-uiy","title":"Implement ReplayGain ↔ Sound Check (iTunNORM) conversion utilities","description":"## Research Findings (2026-02-23) — Fully Reverse-Engineered\n\n### Background\nApple Sound Check targets -16 LUFS (AES TD1008). ReplayGain 2.0 targets -18 LUFS (EBU R128). Both use ITU-R BS.1770 LUFS. The stereo normalization gain offset is a fixed +2.0 dB.\n\n### Part 1: Stereo Normalization Gain (CONFIRMED)\n\nValidated via `afconvert --soundcheck-generate` + `afinfo` on 5 commercial tracks:\n\n- `SC_gain = -16 - LUFS` (exact match for attenuation)\n- `SC_gain = RG_gain + 2.0` (within ±0.15 dB, limited by 0.25 dB quantization)\n- Boost capped to keep true peak ≤ -1 dBTP\n- Maximum boost hard cap: 20 dB\n\n### Part 2: iTunNORM 10-Field Format (FULLY DECODED)\n\nComplete mapping verified against `afinfo` output for 5 tracks + controlled test signals:\n\n```\nField  Description                        afinfo field\n  0    g1_L (ave perceived power coeff)   sc ave perceived power coeff (L)\n  1    g1_R (ave perceived power coeff)   sc ave perceived power coeff (R)\n  2    g2_L (max perceived power coeff)   sc max perceived power coeff (L)\n  3    g2_R (max perceived power coeff)   sc max perceived power coeff (R)\n  4    g2_time_L (max power timestamp)    sc max perceived power msec (L)\n  5    g2_time_R (max power timestamp)    sc max perceived power msec (R)\n  6    peak_L (max sample amplitude)      sc peak amplitude (L) — 16-bit (32768 = 0 dBFS)\n  7    peak_R (max sample amplitude)      sc peak amplitude (R) — 16-bit\n  8    peak_time_L (peak amplitude ms)    sc peak amplitude msec (L)\n  9    peak_time_R (peak amplitude ms)    sc peak amplitude msec (R)\n```\n\n### Part 3: g1/g2 Algorithm (REVERSE-ENGINEERED)\n\nBoth g1 and g2 use the same algorithm: FFT-based weighted power with a psychoacoustic frequency weighting curve.\n\n**Algorithm:**\n1. Divide audio into non-overlapping 1024-sample blocks (23.2ms at 44.1kHz)\n2. Apply Hanning window to each block\n3. Compute FFT (rfft → 513 bins)\n4. Apply psychoacoustic frequency weighting per bin (amplitude domain)\n5. Compute weighted power: P = Σ|H[k]·X[k]|² / block_size\n6. g1 = round(C_g1 × mean(P_across_all_blocks) / 32768²)\n7. g2 = round(C_g2 × max(P_across_all_blocks) / 32768²)\n8. g2_time = block_index_of_max × block_size / sample_rate × 1000 (ms)\n9. peak = max |sample| per channel (16-bit scale)\n10. peak_time = timestamp of peak sample (ms)\n\n**Constants:** C_g1 ≈ 515.8, C_g2 ≈ 497.6 (fitted via least squares on 10 channels × 5 tracks)\n\n**Timestamp validation:** Computed g2 timestamps match Apple's `sc max perceived power msec` exactly for 4/5 tracks (rhcp, nodoubt, oasis, benharper). One track (4nonblondes) differs — the weighting curve approximation causes a different block to \"win\" the max, though the g2 VALUE is still within 1.7% error.\n\n#### Accuracy\n\n| Track | g1 error (L,R) | g2 error (L,R) |\n|-------|----------------|-----------------|\n| 4 Non Blondes | 1.7%, 0.3% (g2); g1 similar | 1.7%, 0.3% |\n| RHCP | 0.3%, 0.4% (g1) | 5.9%, 1.0% |\n| No Doubt | 0.2%, 0.5% (g1) | 0.6%, 0.7% |\n| Oasis | 0.3%, 0.9% (g1) | 1.8%, 0.4% |\n| Ben Harper | 3.9%, 5.0% (g1) | 0.1%, 0.3% |\n\n**g1: 1.5% avg error, 5.3% max error**\n**g2: 1.3% avg error, 5.9% max error**\n\nMax gain error ≈ 0.25 dB → well within human JND (0.5-1.0 dB).\n\n#### Psychoacoustic Weighting Curve (47 data points)\n\nMeasured by generating mono sine tones at each frequency with identical peak amplitude, converting through `afconvert --soundcheck-generate`, and reading g1 values. dB values relative to 1000 Hz.\n\n```\nFreq(Hz)   dB         Freq(Hz)   dB\n31         -50.00     900        -0.14\n40         -21.84     1000        0.00  (reference)\n50         -19.05     1120       +0.60\n63         -16.80     1250       +1.10\n80         -14.44     1400       +1.25\n100        -13.50     1600       +2.00\n125        -13.20     1800       +2.97\n150        -13.03     2000       +4.30\n160        -12.80     2250       +4.32\n180        -10.91     2500       +6.00\n200         -9.20     2800       +7.65\n220         -8.03     3150       +8.30  ← peak\n250         -7.40     3550       +8.33  ← plateau\n280         -6.14     4000       +6.80\n315         -5.10     4500       +3.48\n350         -4.61     5000       +3.50\n400         -3.60     5600       +1.50\n450         -3.46     6300       +1.50\n500         -2.70     7100       +0.20\n560         -2.26     8000       -2.50\n630         -1.70     9000       -2.51\n710         -1.35     10000      -9.40\n800         -0.70     11000      -9.34\n                       12500     -30.00\n                       14000     -30.43\n                       16000     -50.00\n```\n\nCurve shape: inverse equal-loudness contour (ISO 226), peaking at 3.15-3.55 kHz (ear canal resonance). Does NOT match any standard weighting curve (A, B, C, K, ITU-R 468).\n\n### Part 4: Conversion Implications\n\n**RG → SC stereo gain:** `SC_gain = RG_gain + 2.0` — trivial, exact, no audio needed.\n\n**SC → RG stereo gain:** `RG_gain = SC_gain - 2.0` — trivial, exact, no audio needed.\n\n**Computing full iTunNORM from audio:** Requires FFT analysis with the weighting curve. The algorithm is now fully understood and could be implemented in TypeScript. On macOS, `afconvert --soundcheck-generate` produces bit-exact Apple values.\n\n**Converting g1/g2 between RG and SC:** Not possible without audio — g1/g2 encode per-channel perceived power using a proprietary weighting, while RG only stores a stereo gain value.\n\n### Limitations\n\n1. The weighting curve is empirically measured (not exact), leading to ~1-6% g value error\n2. The curve was measured via sine tones; real music may expose nonlinearities not captured\n3. The gist formula (g1=1000×10^(-gain/10), g2=2500×10^(-gain/10)) is WRONG — 4-103% error vs Apple's actual values\n\n### Tools Used\n\n- `afconvert --soundcheck-generate` — generates Apple Sound Check metadata\n- `afinfo` — reveals internal SC fields (perceived power, LUFS, gain, peak amplitude)\n- `ffmpeg` with `ebur128` filter — independent LUFS verification\n- numpy FFT analysis — weighting curve measurement and power computation","notes":"Dense curve measurement (317 points, 2026-02-23): Generated 317 sine tones from 30-16000 Hz, converted through afconvert. Key findings: (1) C = 506.69 ± 0.03 — determined from flat curve plateaus where spectral leakage is zero, confirmed across 3 independent plateaus. NOT 512 or 513. (2) The curve has flat plateaus: +7.65 dB at 2785-3030 Hz, +8.33 dB at 3200-3560 Hz, +6.76 dB at 3750-4170 Hz. (3) 317pt curve halved g2 max error (5.90% → 1.31%). g2 avg with C=506.69 is just 0.51%. (4) g1 remaining error (1.4-2.8%) is from residual curve imprecision at low frequencies, mostly on quietest track (Ben Harper). (5) No public documentation exists for the exact constant or curve — confirmed by comprehensive web research. Dense curve saved at /tmp/sc-dense-curve/dense_curve.npz.","status":"open","priority":3,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-23T22:03:35Z","created_by":"Charles Wiltgen","updated_at":"2026-02-24T04:12:14Z"}
{"id":"taglib-wasm-uxn","title":"Split oversized source files","description":"src/taglib.ts (1229 lines, limit 250), src/types.ts (639 lines), src/errors.ts (264 lines). Extract interfaces, metadata mapping, error classes into separate modules. Must maintain public API compatibility.","status":"closed","priority":0,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:49Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T18:03:59Z","closed_at":"2026-02-10T18:03:59Z","close_reason":"Split src/errors.ts, src/types.ts, src/taglib.ts into directory modules with re-export shims. All 389 tests pass. All files under 250 lines."}
{"id":"taglib-wasm-uy6","title":"Test audit: production-worthy validation for both Wasm backends","status":"closed","priority":1,"issue_type":"epic","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:29:55Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T09:02:36Z","closed_at":"2026-02-10T09:02:36Z","close_reason":"Test audit complete. 12 new files, 129 new test steps across both backends. See taglib-wasm-h5x for remaining gap (existing tests not yet dual-backend)."}
{"id":"taglib-wasm-v11","title":"Gitignore generated SonarCloud/test reports in project root","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-11T10:15:59Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:02:26Z","closed_at":"2026-02-23T21:02:26Z","close_reason":"already resolved in 1.0 release (f1b86e2)"}
{"id":"taglib-wasm-v7k","title":"Workers audioProperties() returns hardcoded stubs for 4 fields","description":"AudioFileWorkers.audioProperties() always returns bitsPerSample=0, codec='Unknown', containerFormat='UNKNOWN', isLossless=false regardless of the actual audio file. The C-style bindings used for Workers don't extract these properties. Either implement proper extraction in the C bindings or return null/undefined for unsupported fields instead of misleading values.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:13Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T19:57:09Z","closed_at":"2026-02-23T19:57:09Z","close_reason":"Workers API removed"}
{"id":"taglib-wasm-w2c","title":"Verify dist/browser/ exclusion is intentional","description":"package.json:29 excludes dist/browser/ from npm. Contains taglib_emscripten.wasm. If any code path needs this file, npm consumers are broken.","status":"closed","priority":1,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:49:00Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:32Z","closed_at":"2026-02-11T14:15:32Z","close_reason":"Verified: No src/ files reference dist/browser/. Exclusion is intentional — standalone build not used by published API."}
{"id":"taglib-wasm-waa","title":"Clarify JSR vs npm import paths in README","description":"Package names differ: JSR @charlesw/taglib-wasm, npm taglib-wasm. README mixes both import styles without clear section headers.","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:50Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:47Z","closed_at":"2026-02-11T14:15:47Z","close_reason":"Added import path note above Quick Start section clarifying Deno (@charlesw/taglib-wasm) vs npm (taglib-wasm) paths. Installation section already shows both."}
{"id":"taglib-wasm-y2r","title":"Dual constant systems: Tags.* vs PROPERTIES.* — potential confusion","description":"Tags object (legacy) and PROPERTIES object both define the same metadata constants with different naming conventions: Tags.MusicBrainzTrackId vs PROPERTIES.MUSICBRAINZ_TRACKID. Both are exported and documented. This creates confusion about which to use. Consider deprecating Tags in favor of PROPERTIES, or document the relationship clearly.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:42Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:38:13Z","closed_at":"2026-02-23T21:38:13Z","close_reason":"implemented in 1.0 cleanup"}
{"id":"taglib-wasm-y2v","title":"Verify JSR publish includes WASM binaries","description":"deno.json:37 excludes 'dist/*' then only re-includes dist/taglib-wrapper.js. WASM files in dist/ are likely excluded from JSR publish. JSR users may get a broken package.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-10T15:48:55Z","created_by":"Charles Wiltgen","updated_at":"2026-02-11T14:15:30Z","closed_at":"2026-02-11T14:15:30Z","close_reason":"Verified: JSR publish config includes build/taglib-wrapper.js, build/taglib-wrapper.d.ts, build/taglib-web.wasm. WASI excluded but falls back gracefully to Emscripten."}
{"id":"taglib-wasm-yi4","title":"Update build-wasi.sh for EH sysroot","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:10Z","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:31:50Z","closed_at":"2026-02-09T15:31:50Z","close_reason":"Closed"}
{"id":"taglib-wasm-z5b","title":"Phase 5: Property-based tests","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-10T08:30:06Z","created_by":"Charles Wiltgen","updated_at":"2026-02-10T08:57:28Z","closed_at":"2026-02-10T08:57:28Z","close_reason":"Property-based tests: 200 roundtrip + 100 idempotency + 100 numeric iterations across both backends."}
{"id":"taglib-wasm-zm5","title":"Simple API loses multi-value PropertyMap data silently","description":"PropertyMap supports string[] (multi-value) but the Simple API Tag interface only exposes single string values for all fields. When a file has multiple artists or genres, readTags() silently drops all but the first value. No warning, no way to detect data loss. Consider: expose arrays in Tag, add a multiValue option, or at minimum document the limitation.","status":"closed","priority":2,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-19T20:55:37Z","created_by":"Charles Wiltgen","updated_at":"2026-02-23T21:38:13Z","closed_at":"2026-02-23T21:38:13Z","close_reason":"implemented in 1.0 cleanup"}
{"id":"taglib-wasm-zsm","title":"Map remaining TagLib PropertyMap keys to camelCase convenience names","description":"taglib_shim.cpp FIELD_MAP only maps 11 keys to camelCase. TagLib's PropertyMap recognizes many more well-known keys that pass through as raw UPPERCASE strings. Keys needing camelCase mapping: SUBTITLE, ORIGINALDATE, ALBUMARTISTSORT, COMPOSERSORT, LABEL, RELEASECOUNTRY, RELEASESTATUS, RELEASETYPE, ASIN. Also missing from MusicBrainz convenience API: MUSICBRAINZ_RELEASETRACKID, MUSICBRAINZ_WORKID, MUSICBRAINZ_ALBUMARTISTID, MUSICIP_PUID. These keys ARE accessible via getProperties() as raw UPPERCASE — this is about convenience mapping only.","status":"closed","priority":3,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:43Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:50Z","closed_at":"2026-02-26T15:17:50Z","close_reason":"All PropertyMap keys mapped to camelCase with VORBIS_TO_CAMEL auto-generation"}
{"id":"taglib-wasm-zsw","title":"Add chapter metadata support (ID3v2 CHAP/CTOC)","description":"TagLib has full ChapterFrame and TableOfContentsFrame support for ID3v2. Not exposed in taglib-wasm at all. Chapters contain start/end timestamps and can embed sub-frames (title, picture per chapter). Essential for podcasts and audiobooks. MP4 also has chapter support via the chpl/chap atoms. Needs: (1) TypeScript types for chapters, (2) C++ shim encoding/decoding, (3) convenience API, (4) tests with chapter-bearing test fixtures.","status":"closed","priority":2,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-26T14:14:35Z","created_by":"Charles Wiltgen","updated_at":"2026-02-26T15:17:51Z","closed_at":"2026-02-26T15:17:51Z","close_reason":"Chapters encode/decode via taglib_chapters.cpp using ID3v2 CHAP frames"}
