# SonarCloud project configuration
# This file is used by SonarCloud to analyze the code quality of the TagLib-Wasm project

# Project identification
sonar.projectKey=CharlesWiltgen_taglib-wasm
sonar.organization=charles-wiltgen
sonar.projectName=TagLib-Wasm
sonar.projectVersion=1.0.0-beta.11

# Source code configuration
sonar.sources=src,index.ts,mod.ts,simple.ts
sonar.tests=tests
# Exclusions include vendor code (lib/), generated files, and non-production code
sonar.exclusions=**/*.test.ts,**/*.spec.ts,**/node_modules/**,**/dist/**,**/build/**,**/coverage/**,**/lib/**,lib/**,**/*.d.ts,**/examples/**,**/tools/**,**/scripts/**

# Test configuration
sonar.test.inclusions=**/*.test.ts,**/*.spec.ts
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# ESLint integration for better Deno support
sonar.eslint.reportPaths=eslint-report.json

# Generic test execution report (generated by deno-test-sonar-reporter.ts)
sonar.testExecutionReportPaths=test-results-sonar.json

# Language configuration
sonar.language=ts
sonar.javascript.file.suffixes=.js,.jsx
sonar.typescript.file.suffixes=.ts,.tsx

# Disable C/C++/Objective-C analysis (TagLib source is not analyzed)
sonar.c.file.suffixes=-
sonar.cpp.file.suffixes=-
sonar.objc.file.suffixes=-

# TypeScript configuration
sonar.typescript.tsconfigPath=tsconfig.json
sonar.typescript.node=20

# Code coverage
sonar.coverage.exclusions=**/*.test.ts,**/*.spec.ts,**/test-utils.ts,**/examples/**,**/scripts/**,**/tools/**,**/lib/**

# Duplication detection
sonar.cpd.exclusions=**/*.test.ts,**/*.spec.ts,**/lib/**

# False positive suppressions
# S7763: types.ts re-exports are used locally in `satisfies` clause — can't use export…from
# S2094: adapter.ts guard classes are intentional (interface compliance, throw on direct construction)
# S6551: file-handle.ts String(value) operates on pre-filtered string/number values
# S1874: scan-operations.ts implements the deprecated forceBufferMode backward compat
sonar.issue.ignore.multicriteria=fp1,fp2,fp3,fp4

sonar.issue.ignore.multicriteria.fp1.ruleKey=typescript:S7763
sonar.issue.ignore.multicriteria.fp1.resourceKey=src/folder-api/types.ts

sonar.issue.ignore.multicriteria.fp2.ruleKey=typescript:S2094
sonar.issue.ignore.multicriteria.fp2.resourceKey=src/runtime/wasi-adapter/adapter.ts

sonar.issue.ignore.multicriteria.fp3.ruleKey=typescript:S6551
sonar.issue.ignore.multicriteria.fp3.resourceKey=src/runtime/wasi-adapter/file-handle.ts

sonar.issue.ignore.multicriteria.fp4.ruleKey=typescript:S1874
sonar.issue.ignore.multicriteria.fp4.resourceKey=src/folder-api/scan-operations.ts

# Encoding
sonar.sourceEncoding=UTF-8

# Links
sonar.links.homepage=https://github.com/CharlesWiltgen/TagLib-Wasm
sonar.links.ci=https://github.com/CharlesWiltgen/TagLib-Wasm/actions
sonar.links.scm=https://github.com/CharlesWiltgen/TagLib-Wasm
sonar.links.issue=https://github.com/CharlesWiltgen/TagLib-Wasm/issues

